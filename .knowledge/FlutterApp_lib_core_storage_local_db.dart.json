{"is_source_file": true, "format": "Dart", "description": "This Dart source file defines a LocalDb class providing a local SQLite database interface using the sqflite package. It manages a cache of items with schema management, CRUD operations, and migration support, primarily for Flutter apps.", "external_files": ["package:path/path.dart", "package:sqflite/sqflite.dart", "migrations/001_init.dart"], "external_methods": ["getDatabasesPath", "databaseFactory.openDatabase", "OpenDatabaseOptions", "m001.create"], "published": ["LocalDb", "ItemLike"], "classes": [{"name": "LocalDb", "description": "A singleton-style class that manages local SQLite database connection, schema initialization, and CRUD operations for cached items."}, {"name": "ItemLike", "description": "An abstract class defining the minimal interface for items to be stored in the database, requiring id, title, body, and updatedAt properties."}], "methods": [{"name": "init", "description": "Initializes the database, creating schema via migrations if necessary."}, {"name": "upsertItems", "description": "Inserts or replaces a list of items atomically within a transaction."}, {"name": "getItems", "description": "Retrieves a paginated list of items ordered by 'updated_at' descending, supporting cursor-based pagination."}, {"name": "getItem", "description": "Fetches a single item by its id."}, {"name": "clear", "description": "Deletes all items from the cache."}, {"name": "close", "description": "Closes the database connection."}, {"name": "_requireDb", "description": "Ensures the database connection is initialized; throws if not."}], "calls": ["databaseFactory.openDatabase", "getDatabasesPath", "p.join", "m001.create", "db.transaction", "txn.batch", "batch.insert", "batch.commit", "db.query", "db.delete", "db.close"], "search-terms": ["local database Flutter", "cached_items schema", "migration 001", "upsertItems transaction", "pagination cursor", "ItemLike interface"], "state": 2, "file_id": 11, "knowledge_revision": 44, "git_revision": "", "revision_history": [{"26": ""}, {"44": ""}], "hash": "d467603272fa954bd3f143d7fad6b027", "format-version": 4, "code-base-name": "FlutterApp", "filename": "FlutterApp/lib/core/storage/local_db.dart"}